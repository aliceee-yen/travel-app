<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>2026 å®¶æ—æ—…è¡Œæ‰‹å¸³</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --bg-color: #fdfaf1; --accent-color: #8c7851; --card-bg: #ffffff; --text-color: #4a4a4a; }
        body { background-color: var(--bg-color); color: var(--text-color); font-family: "Noto Sans TC", sans-serif; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .day-tab.active { background-color: #f3e9d2; border-color: var(--accent-color); color: var(--accent-color); transform: scale(1.05); }
        .schedule-card { background: var(--card-bg); border-radius: 16px; border-left: 5px solid #e0d5c1; }
        .input-minimal { border: none; background: transparent; border-bottom: 1px solid #eee; outline: none; width: 100%; }
        .weather-badge { background: #fff; border: 1px solid #f0e5cf; border-radius: 20px; padding: 4px 12px; font-size: 0.8rem; color: #8c7851; font-weight: bold; }
        .sticky-nav { background: rgba(253, 250, 241, 0.9); backdrop-filter: blur(10px); }
        input[type="time"] { border: none; background: transparent; font-weight: bold; }
    </style>
</head>
<body class="pb-20">

    <header class="p-6 text-center">
        <h1 class="text-2xl font-bold tracking-widest text-[#8c7851]">2026 å®¶æ—æ—…éŠæ‰‹å¸³</h1>
        <p class="text-xs text-gray-400 mt-1 uppercase tracking-widest">è™å°¾ â€¢ é‡œå±± â€¢ ä¹å·</p>
    </header>

    <nav class="sticky-nav sticky top-0 z-50 px-4 py-4 flex gap-3 overflow-x-auto no-scrollbar">
        <button onclick="switchDay(0)" class="day-tab flex-shrink-0 px-6 py-2 rounded-full border border-transparent font-bold text-sm bg-white shadow-sm" id="tab0">D0 2/13</button>
        <button onclick="switchDay(1)" class="day-tab flex-shrink-0 px-6 py-2 rounded-full border border-transparent font-bold text-sm bg-white shadow-sm" id="tab1">D1 2/14</button>
        <button onclick="switchDay(2)" class="day-tab flex-shrink-0 px-6 py-2 rounded-full border border-transparent font-bold text-sm bg-white shadow-sm" id="tab2">D2 2/15</button>
        <button onclick="switchDay(3)" class="day-tab flex-shrink-0 px-6 py-2 rounded-full border border-transparent font-bold text-sm bg-white shadow-sm" id="tab3">D3 2/16</button>
        <button onclick="switchDay(4)" class="day-tab flex-shrink-0 px-6 py-2 rounded-full border border-transparent font-bold text-sm bg-white shadow-sm" id="tab4">D4 2/17</button>
        <button onclick="switchDay(5)" class="day-tab flex-shrink-0 px-6 py-2 rounded-full border border-transparent font-bold text-sm bg-white shadow-sm" id="tab5">D5 2/18</button>
        <button onclick="switchDay(6)" class="day-tab flex-shrink-0 px-6 py-2 rounded-full border border-transparent font-bold text-sm bg-white shadow-sm" id="tab6">D6 2/19</button>
        <button onclick="switchDay(7)" class="day-tab flex-shrink-0 px-6 py-2 rounded-full border border-transparent font-bold text-sm bg-white shadow-sm" id="tab7">D7 2/20</button>
        <button onclick="switchDay(8)" class="day-tab flex-shrink-0 px-6 py-2 rounded-full border border-transparent font-bold text-sm bg-white shadow-sm" id="tab8">D8 2/21</button>
    </nav>

    <main id="app-content" class="p-5">
        </main>

    <script>
        const tripData = {
            currentDay: 0,
            days: {
                0: { city: "é›²æ—/æ¡ƒåœ’", weather: "â˜ï¸ 16Â°C", rate: 1, currency: "TWD", items: [
                    { time: "21:30", loc: "è™å°¾å®¶ä¸­å‡ºç™¼", note: "é–‹è»Šå‰å¾€é«˜éµç«™", map: "é›²æ—ç¸£è™å°¾é®åŸ’å…§217-5è™Ÿ" },
                    { time: "22:16", loc: "é›²æ—é«˜éµç«™", note: "åŒ—ä¸Šæœ«ç­è»Šå‰å¾€æ¡ƒåœ’", map: "é«˜éµé›²æ—ç«™" }
                ], expenses: [] },
                1: { city: "é‡œå±±", weather: "â˜€ï¸ 2Â°C ~ 10Â°C", rate: 0.024, currency: "KRW", items: [
                    { time: "06:10", loc: "é‡œå±±é‡‘æµ·æ©Ÿå ´", note: "æ¿Ÿå·èˆªç©º 7C 6164 (ç¬¬ä¸€èˆªå»ˆ T1)", map: "Gimhae International Airport" },
                    { time: "09:30", loc: "çš‡åé…’åº— Queens Hotel", note: "è¥¿é¢ç«™é™„è¿‘ï¼Œå…ˆå¯„æ”¾è¡Œæ", map: "Queens Hotel Seomyeon" }
                ], expenses: [] },
                5: { city: "é•·å´", weather: "ğŸŒ¤ï¸ 4Â°C ~ 11Â°C", rate: 0.22, currency: "JPY", items: [
                    { time: "10:00", loc: "é•·å´ä¼éµæ°´æ—é¤¨", note: "æ­ä¹˜å·´å£«å‰å¾€ï¼Œå°å­©æœ€æœŸå¾…æ™¯é»", map: "é•·å´ä¼éµæ°´æ—é¤¨" },
                    { time: "13:00", loc: "é•·å´æ¸¯æµ·é®®å¸‚å ´", note: "äº«ç”¨åœ¨åœ°æµ·è†½è“‹é£¯", map: "é•·å´æ¸¯ é¤å»³" }
                ], expenses: [] }
            }
        };

        function switchDay(d) {
            tripData.currentDay = d;
            if (!tripData.days[d]) {
                // åˆå§‹åŒ–ç©ºç™½å¤©æ•¸
                tripData.days[d] = { 
                    city: d < 4 ? "é‡œå±±" : "ä¹å·", 
                    weather: "â˜€ï¸ é æ¸¬ä¸­", 
                    rate: d < 4 ? 0.024 : 0.22, 
                    currency: d < 4 ? "KRW" : "JPY",
                    items: [], 
                    expenses: [] 
                };
            }
            render();
        }

        function addSchedule() {
            tripData.days[tripData.currentDay].items.push({ time: "12:00", loc: "æ–°è¡Œç¨‹", note: "é»æ“Šç·¨è¼¯å‚™è¨»...", map: "" });
            render();
        }

        function addExpense() {
            tripData.days[tripData.currentDay].expenses.push({ name: "æ–°å¢æ”¯å‡º", cost: "" });
            render();
        }

        function render() {
            const container = document.getElementById('app-content');
            const day = tripData.days[tripData.currentDay];
            
            document.querySelectorAll('.day-tab').forEach(t => t.classList.remove('active'));
            document.getElementById(`tab${tripData.currentDay}`).classList.add('active');

            let html = `
                <div class="flex justify-between items-end mb-8">
                    <div>
                        <span class="text-[10px] font-bold text-gray-400 tracking-widest">ç›®å‰ä½ç½®</span>
                        <h2 class="text-2xl font-bold">${day.city}</h2>
                    </div>
                    <div class="weather-badge">${day.weather}</div>
                </div>

                <div class="space-y-4 mb-10">
                    <h3 class="text-xs font-bold text-[#8c7851] tracking-widest mb-4">æ¯æ—¥è¡Œç¨‹</h3>
                    ${day.items.map((item, idx) => `
                        <div class="schedule-card p-5 shadow-sm relative">
                            <button onclick="tripData.days[${tripData.currentDay}].items.splice(${idx},1);render();" class="absolute top-3 right-3 text-gray-300">âœ•</button>
                            <div class="flex gap-4">
                                <input type="time" value="${item.time}" onchange="tripData.days[${tripData.currentDay}].items[${idx}].time=this.value" class="text-lg w-20 outline-none">
                                <div class="flex-1">
                                    <input type="text" value="${item.loc}" onchange="tripData.days[${tripData.currentDay}].items[${idx}].loc=this.value" class="font-bold block w-full outline-none text-base" placeholder="åœ°é»åç¨±">
                                    <input type="text" value="${item.note}" onchange="tripData.days[${tripData.currentDay}].items[${idx}].note=this.value" class="text-xs text-gray-400 mt-1 block w-full outline-none italic" placeholder="æ·»åŠ å‚™è¨»...">
                                    <a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(item.loc)}" target="_blank" class="text-[10px] text-blue-400 mt-3 inline-block font-bold">ğŸ—ºï¸ é–‹å•Ÿ Google åœ°åœ–</a>
                                </div>
                            </div>
                        </div>
                    `).join('')}
                    <button onclick="addSchedule()" class="w-full py-4 border-2 border-dashed border-gray-200 rounded-2xl text-gray-300 text-sm font-bold">+ æ–°å¢è¡Œç¨‹é»</button>
                </div>

                <div class="bg-[#f3e9d2] rounded-3xl p-6 mb-10 shadow-inner">
                    <h3 class="text-xs font-bold text-[#8c7851] mb-6 tracking-widest">éš¨æ‰‹è¨˜å¸³ (${day.currency})</h3>
                    <div class="space-y-4">
                        ${day.expenses.map((ex, idx) => `
                            <div class="flex items-center gap-3">
                                <input type="text" value="${ex.name}" onchange="tripData.days[${tripData.currentDay}].expenses[${idx}].name=this.value" class="flex-1 bg-transparent border-b border-white/50 text-sm outline-none font-medium">
                                <div class="flex items-center gap-2">
                                    <input type="number" value="${ex.cost}" placeholder="0" oninput="tripData.days[${tripData.currentDay}].expenses[${idx}].cost=this.value; updateTotal();" class="w-24 bg-white/80 rounded-lg px-2 py-1 text-right font-bold outline-none text-sm">
                                    <div class="text-[11px] text-gray-500 w-16 text-right font-bold">â‰ˆ NT$ ${Math.round(ex.cost * day.rate).toLocaleString()}</div>
                                </div>
                                <button onclick="tripData.days[${tripData.currentDay}].expenses.splice(${idx},1);render();" class="text-gray-400">âœ•</button>
                            </div>
                        `).join('')}
                    </div>
                    <button onclick="addExpense()" class="mt-6 text-xs font-bold text-[#8c7851] border border-[#8c7851] px-4 py-1 rounded-full">+ å¢åŠ æ¶ˆè²»é …ç›®</button>
                    <div class="mt-8 pt-6 border-t border-white/30 flex justify-between items-end">
                        <span class="text-xs text-gray-500 font-bold">ä»Šæ—¥é ç®—ç¸½è¨ˆ</span>
                        <div class="text-3xl font-bold text-[#8c7851]">NT$ <span id="day-total">${calculateDayTotal(day)}</span></div>
                    </div>
                </div>
            `;
            container.innerHTML = html;
        }

        function calculateDayTotal(day) {
            return Math.round(day.expenses.reduce((sum, ex) => sum + (Number(ex.cost) || 0), 0) * day.rate).toLocaleString();
        }

        function updateTotal() {
            const day = tripData.days[tripData.currentDay];
            document.getElementById('day-total').innerText = calculateDayTotal(day);
            // ç‚ºäº†è®“æ¯ä¸€è¡Œçš„ NT$ å³æ™‚æ›´æ–°ï¼Œé€™è£¡å‘¼å«ä¸€å€‹è¼•é‡æ›´æ–°
            const expenseRows = document.querySelectorAll('#app-content .text-\\[11px\\]');
            day.expenses.forEach((ex, idx) => {
                if (expenseRows[idx]) {
                    expenseRows[idx].innerText = `â‰ˆ NT$ ${Math.round(ex.cost * day.rate).toLocaleString()}`;
                }
            });
        }

        window.onload = () => switchDay(0);
    </script>
</body>
</html>
