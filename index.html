<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>2026 è·¨åœ‹å†’éšª App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=ZCOOL+KuaiLe&family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --main-bg: #fefaf0; --sketch-black: #333; }
        body { font-family: 'Noto Sans TC', sans-serif; background-color: var(--main-bg); color: var(--sketch-black); overflow-x: hidden; }
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: slideUp 0.3s ease-out; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
        .sketch-card { background: white; border: 2.5px solid var(--sketch-black); border-radius: 12px 40px 15px 35px/35px 15px 40px 12px; transition: transform 0.1s; }
        .sketch-card:active { transform: scale(0.98); }
        .day-btn.active { background-color: var(--sketch-black); color: white; border-color: var(--sketch-black); }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .parent-tag { background: #e0f2fe; color: #0369a1; border-radius: 4px; padding: 2px 6px; font-weight: bold; font-size: 11px; }
        .story-bubble { background: #fffbeb; border-left: 4px solid #f59e0b; padding: 10px; font-style: italic; font-size: 13px; }
    </style>
</head>
<body class="pb-28">

    <header class="bg-white border-b-4 border-black p-6 pt-12 text-center shadow-sm">
        <h1 class="text-3xl font-bold" style="font-family: 'ZCOOL KuaiLe';">ğŸ¦– è·¨åœ‹å¤§å†’éšª</h1>
        <p class="text-xs mt-2 font-bold tracking-widest text-gray-400">YUNLIN â” BUSAN â” KYUSHU</p>
    </header>

    <main class="p-4 max-w-md mx-auto">
        
        <section id="plan" class="tab-content active">
            <div class="flex overflow-x-auto gap-2 pb-4 no-scrollbar mb-4" id="dayNav">
                </div>
            <div id="dayContent" class="space-y-5"></div>
        </section>

        <section id="story" class="tab-content">
            <h2 class="text-xl font-bold mb-4 flex items-center gap-2">
                <i class="fa-solid fa-wand-magic-sparkles text-yellow-500"></i> å°éŠæ•…äº‹æ›¸
            </h2>
            <div id="storyContent" class="space-y-4"></div>
        </section>

        <section id="wallet" class="tab-content">
            <div class="sketch-card p-6 mb-6">
                <h3 class="font-bold mb-4">ğŸ’° éš¨æ‰‹è¨˜å¸³</h3>
                <div class="space-y-4">
                    <input id="jpAmt" type="number" placeholder="é‡‘é¡ (æ—¥å¹£/éŸ“å…ƒ)" class="w-full p-3 border-2 border-black rounded-lg focus:outline-none">
                    <input id="itemDesc" type="text" placeholder="è²·äº†ä»€éº¼ï¼Ÿ" class="w-full p-3 border-2 border-black rounded-lg focus:outline-none">
                    <div class="flex justify-between items-center px-1">
                        <span class="text-xs font-bold text-gray-400">æ¦‚ä¼°åŒ¯ç‡: 0.21 / 0.024</span>
                        <button onclick="addRecord()" class="bg-black text-white px-6 py-2 rounded-full font-bold">è¨˜éŒ„</button>
                    </div>
                </div>
            </div>
            <div id="recordList" class="space-y-2"></div>
        </section>

    </main>

    <nav class="fixed bottom-0 left-0 right-0 bg-white border-t-4 border-black flex justify-around items-center py-4 pb-10 z-50">
        <button onclick="switchTab('plan')" class="nav-btn text-black flex flex-col items-center">
            <i class="fa-solid fa-map"></i><span class="text-[10px] mt-1 font-bold">è¡Œç¨‹è¡¨</span>
        </button>
        <button onclick="switchTab('story')" class="nav-btn text-gray-300 flex flex-col items-center">
            <i class="fa-solid fa-face-smile"></i><span class="text-[10px] mt-1 font-bold">èªªæ•…äº‹</span>
        </button>
        <button onclick="switchTab('wallet')" class="nav-btn text-gray-300 flex flex-col items-center">
            <i class="fa-solid fa-coins"></i><span class="text-[10px] mt-1 font-bold">å°éŒ¢åŒ…</span>
        </button>
    </nav>

    <script>
        const trip = [
            { d: "D0", date: "2/13", country: "TW", items: [
                { time: "21:30", act: "é›²æ—è™å°¾å‡ºç™¼", note: "é ç´„è¨ˆç¨‹è»Šï¼Œç©¿å¥½ä¿æš–è¡£ç‰©", story: "æˆ‘å€‘è¦å»éŸ“åœ‹å’Œæ—¥æœ¬å–”ï¼å®ƒå€‘é›¢å¾—å¾ˆè¿‘ï¼Œå¾ˆä¹…ä»¥å‰çš„äººæ˜¯æ­èˆ¹åšç”Ÿæ„çš„ï¼", loc: "é›²æ—ç¸£è™å°¾é®" },
                { time: "22:16", act: "é›²æ—é«˜éµ (æœ«ç­)", note: "22:16ç™¼â”23:18è‘—", story: "å°ç£é«˜éµçš„æŠ€è¡“è·Ÿæ—¥æœ¬è²·çš„ï¼Œæ–°å¹¹ç·šæ˜¯é«˜éµçš„çˆºçˆºï¼", loc: "é›²æ—é«˜éµç«™" }
            ]},
            { d: "D1", date: "2/14", country: "KR", items: [
                { time: "06:10", act: "æŠµé”é‡œå±±é‡‘æµ·æ©Ÿå ´", note: "Money Boxæ›éŒ¢ã€Q-CODEæº–å‚™", story: "éŸ“æ–‡åœ“åœˆå‰å‰æ˜¯ä¸–å®—å¤§ç‹ç™¼æ˜çš„ï¼Œæ¨¡ä»¿å˜´å·´å½¢ç‹€å–”ï¼", loc: "Gimhae International Airport" },
                { time: "08:00", act: "æ¾äº­ä¸‰ä»£è±¬è‚‰æ¹¯é£¯", note: "æ—æ—é»ä¸è¾£ã€‚è¦é†¬èª¿å‘³ï¼ŒéŸ­èœåŠ æ¹¯ã€‚", story: "é€™æ˜¯ã€Œæˆ°çˆ­ç•™ä¸‹ä¾†çš„ç¾é£Ÿã€ï¼Œä»¥å‰æ²’éŒ¢è²·è‚‰æ‰ç”¨éª¨é ­ç†¬æ¹¯ã€‚", loc: "Songjeong Samdae Gukbap" },
                { time: "16:00", act: "é£¯åº—è£œçœ  (å…¨å®¶å……é›»)", note: "ç¡2å°æ™‚æ‡‰ä»˜æ™šä¸Šäººæ½®", story: "é€™å«ã€Œå……é›»æ™‚é–“ã€ï¼Œç¡é£½äº†æ‰æœ‰é«”åŠ›ç©ï¼", loc: "Seomyeon Station" }
            ]},
            { d: "D2", date: "2/15", country: "KR", items: [
                { time: "10:30", act: "å¤©ç©ºè† å›Šåˆ—è»Š", note: "ææ—©å…©é€±å®˜ç¶²æ¶ç¥¨ (å°¾æµ¦â”é’æ²™æµ¦)", story: "é€™æ˜¯ç©æœ¨è»Šè»Šï¼ç”¨èˆŠéµè·¯æ”¹è£çš„ï¼Œæ˜¯è°æ˜çš„å»¢ç‰©åˆ©ç”¨å–”ã€‚", loc: "Mipo Station" },
                { time: "13:00", act: "æµ·ç†åœ˜è·¯é€›è¡—", note: "Dualholicã€äººç”Ÿå››æ ¼æ‹è²¼", story: "ä¸€å®šè¦åƒç³–é¤…ï¼é‚£æ˜¯éŸ“åœ‹å°æœ‹å‹æœ€æ„›çš„é»å¿ƒã€‚", loc: "Haeridan-gil" }
            ]},
            { d: "D3", date: "2/16", country: "KR", items: [
                { time: "09:30", act: "ç”˜å·æ´æ–‡åŒ–æ‘", note: "å°ç‹å­æ‹ç…§ã€é›†ç« ", story: "æˆ¿å­æ¼†æˆå½©è‰²æ˜¯å› ç‚ºé€™æ¨£æ‰ä¸æœƒè¦ºå¾—ç”Ÿæ´»ç°æš—ï¼Œä¹Ÿå®¹æ˜“èªå‡ºå®¶é–€ï¼", loc: "Gamcheon Culture Village" },
                { time: "17:00", act: "é‡œå±±æ¸¯ç™»èˆ¹", note: "æ–°å±±èŒ¶èŠ±è™Ÿã€‚17:30å‰å®Œæˆå ±åˆ°ã€‚", story: "èˆ¹æ˜¯æµ·ä¸Šé£¯åº—ï¼Œæ˜å¤©é†’ä¾†å¤§å®¶å°±æœƒèªªæ—¥æ–‡å›‰ï¼", loc: "Busan Port International Passenger Terminal" }
            ]},
            { d: "D4", date: "2/17", country: "JP", items: [
                { time: "09:00", act: "åšå¤šè»Šç«™è²·ç¥¨", note: "æ¶è¨‚787ç³»åŒ…å»‚ã€‚è²·å…’ç«¥ç¥¨çµ¦æ—æ—ã€‚", story: "æ—¥æœ¬ç«è»Šä¾¿ç•¶æ˜¯å†·çš„ï¼ä½†åŒ…è£è¶…æ¼‚äº®ï¼Œé¸ä¸€å€‹å§ï¼", loc: "Hakata Station" },
                { time: "15:30", act: "å¹³å’Œå…¬åœ’", note: "åŸçˆ†è³‡æ–™é¤¨â”å¹³å’Œå…¬åœ’", story: "é‚£å€‹é›•åƒæ‰‹æŒ‡è‘—å¤©èªªã€Œææ€–å¾å¤©è€Œé™ã€ï¼Œæ‰‹å¹³ä¼¸èªªã€Œæˆ‘å€‘è¦å’Œå¹³ã€ã€‚", loc: "Nagasaki Peace Park" }
            ]},
            { d: "D6", date: "2/19", country: "JP", items: [
                { time: "08:30", act: "å–è»Šè‡ªé§• (NIPPON)", note: "æª¢æŸ¥é›ªèƒã€ETCå¡ã€‚å³é§•æŒ‘æˆ°é–‹å§‹ï¼", story: "æ—¥æœ¬é–‹è»Šæ–¹å‘ç›¤åœ¨å³é‚Šï¼å¤§å®¶è¦ç•¶çˆ¸çˆ¸çš„å°èˆªå°å¹«æ‰‹å–”ï¼", loc: "AMU PLAZA Nagasaki" },
                { time: "17:00", act: "å¤©ç€¨æº«æ³‰ æºªä»™é–£", note: "åœ‹é“210è½‰é€²è·¯çª„æ…¢è¡Œ", story: "æº«æ³‰å°±åœ¨æ²³é‚Šå–”ï¼ä»¥å‰çš„äººéƒ½æ˜¯ç›´æ¥åœ¨æ²³é‚Šæ´—æ¾¡çš„ï¼", loc: "å¤©ãƒ¶ç€¬æ¸©æ³‰ æ¸“ä»™é–£" }
            ]},
            { d: "D7", date: "2/20", country: "JP", items: [
                { time: "09:40", act: "ä¹å·è‡ªç„¶å‹•ç‰©åœ’", note: "é ç´„Jungle Busã€‚é¤µè‚‰å¤¾å­æ‹¿ç©©ã€‚", story: "ä»Šå¤©æ˜¯æˆ‘å€‘è¢«é—œåœ¨ç± å­è»Šè£¡çµ¦ç…å­çœ‹ï¼ç…å­åŠ›æ°£å¾ˆå¤§å–”ï¼", loc: "African Safari" },
                { time: "15:45", act: "é‡‘é±—æ¹–", note: "çœ‹æ°´ä¸­é³¥å±…ã€‚æº«æ³‰æ°´æ··åœ°ä¸‹æ°´æœƒå†’ç…™ã€‚", story: "æ¹–é¢æœƒå†’ç…™åƒä»™å¢ƒä¸€æ¨£ï¼Œæ˜¯å› ç‚ºæ¹–è£¡æœ‰ç†±ç†±çš„æº«æ³‰å–”ã€‚", loc: "Kinrin Lake" }
            ]},
            { d: "D8", date: "2/21", country: "JP", items: [
                { time: "12:30", act: "åˆé¤ï¼šè±å¾ŒèŒ¶å±‹", note: "å¤§åˆ†é›è‚‰å¤©å©¦ç¾… (Toriten)", story: "å¤§åˆ†é›è‚‰å¤©å©¦ç¾…ç©¿è‘—è»Ÿéºµè¡£ï¼Œæ˜¯åª½åª½ç‚ºäº†è®“é›è‚‰è»Ÿå«©ç™¼æ˜çš„ã€‚", loc: "Oita Station" },
                { time: "16:30", act: "å¤§åˆ†æ©Ÿå ´èµ·é£›", note: "ç­æ©Ÿ IT241ã€‚å›å®¶å›‰ï¼", story: "é€™æ¬¡æˆ‘å€‘æ›äº†10ç¨®äº¤é€šå·¥å…·ï¼Œæ˜¯äº¤é€šå·¥å…·å¤§é›†åˆä¹‹æ—…ï¼", loc: "Oita Airport" }
            ]}
        ];

        function openMap(loc, country) {
            let url = "";
            if (country === "KR") {
                url = `https://map.naver.com/v5/search/${encodeURIComponent(loc)}`;
            } else {
                url = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(loc)}`;
            }
            window.open(url, '_blank');
        }

        function showDay(idx) {
            const data = trip[idx];
            const nav = document.getElementById('dayNav');
            const content = document.getElementById('dayContent');
            const storyBox = document.getElementById('storyContent');

            // Render Nav Buttons
            nav.innerHTML = trip.map((d, i) => `
                <button onclick="showDay(${i})" class="day-btn flex-shrink-0 px-4 py-2 border-2 border-black rounded-full text-xs font-bold ${i === idx ? 'active' : 'bg-white'}">
                    ${d.d} ${d.date}
                </button>
            `).join('');

            // Render Items
            content.innerHTML = data.items.map(item => `
                <div class="sketch-card p-5 relative overflow-hidden">
                    <div class="flex justify-between items-start mb-2">
                        <span class="text-xs font-black bg-yellow-300 px-2 py-1 rounded border border-black">${item.time}</span>
                        <button onclick="openMap('${item.loc}', '${data.country}')" class="text-blue-500 text-lg">
                            <i class="fa-solid fa-location-dot"></i>
                        </button>
                    </div>
                    <h3 class="font-bold text-lg mb-2">${item.act}</h3>
                    <div class="text-xs leading-relaxed text-gray-600 mb-2">
                        <span class="parent-tag">ğŸ’ å®¶é•·</span> ${item.note}
                    </div>
                </div>
            `).join('');

            // Render Stories (all days for browsing)
            storyBox.innerHTML = trip[idx].items.map(item => `
                <div class="sketch-card p-4 text-sm">
                    <div class="font-bold text-orange-600 mb-2 underline">é—œæ–¼ã€Œ${item.act}ã€</div>
                    <p class="story-bubble">"${item.story}"</p>
                </div>
            `).join('');
        }

        function switchTab(id) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.replace('text-black', 'text-gray-300'));
            event.currentTarget.classList.replace('text-gray-300', 'text-black');
            window.scrollTo(0,0);
        }

        function addRecord() {
            const amt = document.getElementById('jpAmt').value;
            const desc = document.getElementById('itemDesc').value || 'æ”¯å‡º';
            if(!amt) return;
            const records = JSON.parse(localStorage.getItem('trip_wallet') || '[]');
            records.push({ desc, amt, date: new Date().toLocaleTimeString() });
            localStorage.setItem('trip_wallet', JSON.stringify(records));
            document.getElementById('jpAmt').value = '';
            document.getElementById('itemDesc').value = '';
            renderWallet();
        }

        function renderWallet() {
            const records = JSON.parse(localStorage.getItem('trip_wallet') || '[]');
            document.getElementById('recordList').innerHTML = records.map(r => `
                <div class="bg-white p-3 border-2 border-black rounded-lg flex justify-between items-center text-sm">
                    <span class="font-bold">${r.desc}</span>
                    <span class="font-mono">Â¥${r.amt}</span>
                </div>
            `).reverse().join('');
        }

        // Init
        showDay(0);
        renderWallet();
    </script>
</body>
</html>
